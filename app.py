import streamlit as st
import random
import base64
from PIL import Image, ImageDraw
import io
import time

# Configuration de la page
st.set_page_config(
    page_title="ğŸŒŠ Tsunami Expert", 
    page_icon="ğŸŒŠ", 
    layout="wide"
)

# ==================== STYLE MODERNE ====================
st.markdown("""
<style>
    .main-header {
        font-size: 2.8rem;
        color: #1e88e5;
        text-align: center;
        margin-bottom: 1rem;
        font-weight: bold;
    }
    .chat-container {
        background: white;
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 20px;
        border: 1px solid #e0e0e0;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .sidebar-content {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 12px;
        margin: 12px 0;
        border-left: 4px solid #1e88e5;
    }
    .emergency-box {
        background: linear-gradient(135deg, #ff5252, #d32f2f);
        color: white;
        padding: 18px;
        border-radius: 12px;
        text-align: center;
        font-weight: bold;
    }
    .question-btn {
        background: linear-gradient(135deg, #4caf50, #2e7d32);
        color: white;
        border: none;
        padding: 12px 18px;
        border-radius: 10px;
        margin: 6px 0;
        width: 100%;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
        font-size: 0.9em;
        text-align: left;
    }
    .question-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(76,175,80,0.3);
    }
    .arabic-text {
        direction: rtl;
        text-align: right;
        line-height: 1.8;
        font-size: 1.05em;
    }
    .category-header {
        color: #1e88e5;
        border-bottom: 2px solid #1e88e5;
        padding-bottom: 8px;
        margin-top: 20px;
        font-weight: bold;
    }
</style>
""", unsafe_allow_html=True)

# ==================== SYSTÃˆME MULTILINGUE ====================

LANGUAGES = {
    "ğŸ‡«ğŸ‡· FranÃ§ais": "fr",
    "ğŸ‡¬ğŸ‡§ English": "en", 
    "ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©": "ar"
}

# ==================== BASE DE CONNAISSANCES COMPLÃˆTE ====================

KNOWLEDGE_BASE = {
    "definition_tsunami": {
        "keywords": {
            "fr": ["qu'est ce qu'un tsunami", "dÃ©finition tsunami", "dÃ©finition d'un tsunami", "c'est quoi un tsunami"],
            "en": ["what is a tsunami", "tsunami definition", "definition of tsunami"],
            "ar": ["Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ", "ØªØ¹Ø±ÙŠÙ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ", "Ù…Ø§Ù‡Ùˆ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ"]
        },
        "responses": {
            "fr": """
**ğŸŒŠ QU'EST-CE QU'UN TSUNAMI ?**

**DÃ‰FINITION :**
Un tsunami est une sÃ©rie de vagues ocÃ©aniques extrÃªmement longues et puissantes, gÃ©nÃ©rÃ©es par des perturbations soudaines du fond marin. Contrairement aux vagues normales crÃ©Ã©es par le vent, les tsunamis transportent une Ã©nergie colossale sur de grandes distances.

**CARACTÃ‰RISTIQUES PRINCIPALES :**

**â€¢ Longueur d'onde** : 100-300 km (vs 100-200 m pour vagues normales)
**â€¢ PÃ©riode** : 10-60 minutes entre les vagues
**â€¢ Vitesse** : 500-800 km/h en eau profonde
**â€¢ Amplitude** : Faible en mer (quelques cm), Ã©norme prÃ¨s des cÃ´tes

**Ã‰TYMOLOGIE :**
Mot japonais : "tsu" (port) + "nami" (vague) = "vague de port"
            """,
            "en": """
**ğŸŒŠ WHAT IS A TSUNAMI?**

**DEFINITION:**
A tsunami is a series of extremely long and powerful ocean waves generated by sudden disturbances of the seabed. Unlike normal waves created by wind, tsunamis carry colossal energy over great distances.

**MAIN CHARACTERISTICS:**

**â€¢ Wavelength**: 100-300 km (vs 100-200 m for normal waves)
**â€¢ Period**: 10-60 minutes between waves
**â€¢ Speed**: 500-800 km/h in deep water
**â€¢ Amplitude**: Low at sea (few cm), huge near coasts

**ETYMOLOGY:**
Japanese word: "tsu" (harbor) + "nami" (wave) = "harbor wave"
            """,
            "ar": """
**ğŸŒŠ Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠØŸ**

**Ø§Ù„ØªØ¹Ø±ÙŠÙ:**
Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ Ù‡Ùˆ Ø³Ù„Ø³Ù„Ø© Ù…Ù† Ø£Ù…ÙˆØ§Ø¬ Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ø·ÙˆÙŠÙ„Ø© ÙˆØ§Ù„Ù‚ÙˆÙŠØ© Ø¨Ø´ÙƒÙ„ Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØŒ generated by sudden disturbances of the seabed. Ø¹Ù„Ù‰ Ø¹ÙƒØ³ Ø§Ù„Ø£Ù…ÙˆØ§Ø¬ Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© Ø§Ù„Ù†Ø§ØªØ¬Ø© Ø¹Ù† Ø§Ù„Ø±ÙŠØ§Ø­ØŒ ÙŠØ­Ù…Ù„ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ Ø·Ø§Ù‚Ø© Ù‡Ø§Ø¦Ù„Ø© Ø¹Ø¨Ø± Ù…Ø³Ø§ÙØ§Øª ÙƒØ¨ÙŠØ±Ø©.

**Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:**

**â€¢ Ø§Ù„Ø·ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¬ÙŠ**: 100-300 ÙƒÙ… (Ù…Ù‚Ø§Ø¨Ù„ 100-200 Ù… Ù„Ù„Ø£Ù…ÙˆØ§Ø¬ Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©)
**â€¢ Ø§Ù„ÙØªØ±Ø©**: 10-60 Ø¯Ù‚ÙŠÙ‚Ø© Ø¨ÙŠÙ† Ø§Ù„Ø£Ù…ÙˆØ§Ø¬
**â€¢ Ø§Ù„Ø³Ø±Ø¹Ø©**: 500-800 ÙƒÙ…/Ø³Ø§Ø¹Ø© ÙÙŠ Ø§Ù„Ù…ÙŠØ§Ù‡ Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©
**â€¢ Ø§Ù„Ø³Ø¹Ø©**: Ù…Ù†Ø®ÙØ¶Ø© ÙÙŠ Ø§Ù„Ø¨Ø­Ø± (Ø¨Ø¶Ø¹Ø© Ø³Ù…)ØŒ Ù‡Ø§Ø¦Ù„Ø© Ø¨Ø§Ù„Ù‚Ø±Ø¨ Ù…Ù† Ø§Ù„Ø³ÙˆØ§Ø­Ù„

**Ø£ØµÙ„ Ø§Ù„ÙƒÙ„Ù…Ø©:**
ÙƒÙ„Ù…Ø© ÙŠØ§Ø¨Ø§Ù†ÙŠØ©: "ØªØ³Ùˆ" (Ù…ÙŠÙ†Ø§Ø¡) + "Ù†Ø§Ù…ÙŠ" (Ù…ÙˆØ¬Ø©) = "Ù…ÙˆØ¬Ø© Ø§Ù„Ù…ÙŠÙ†Ø§Ø¡"
            """
        }
    },

    "difference_vague_normale": {
        "keywords": {
            "fr": ["diffÃ©rence avec vague normale", "diffÃ©rence vague tsunami", "vague normale vs tsunami"],
            "en": ["difference with normal wave", "tsunami vs normal wave", "normal wave difference"],
            "ar": ["Ø§Ù„ÙØ±Ù‚ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¬Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©", "Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ù…ÙˆØ¬Ø© Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ ÙˆØ§Ù„Ø¹Ø§Ø¯ÙŠØ©", "Ù…ÙˆØ¬Ø© Ø¹Ø§Ø¯ÙŠØ© Ù…Ù‚Ø§Ø¨Ù„ ØªØ³ÙˆÙ†Ø§Ù…ÙŠ"]
        },
        "responses": {
            "fr": """
**ğŸŒŠ DIFFÃ‰RENCE ENTRE TSUNAMI ET VAGUE NORMALE**

**ORIGINE :**
â€¢ **Vague normale** : Vent Ã  la surface
â€¢ **Tsunami** : Perturbation du fond marin (sÃ©isme, glissement)

**CARACTÃ‰RISTIQUES PHYSIQUES :**

**LONGUEUR D'ONDE :**
â€¢ **Vague normale** : 100-200 mÃ¨tres
â€¢ **Tsunami** : 100-300 KILOMÃˆTRES

**VITESSE :**
â€¢ **Vague normale** : 10-60 km/h
â€¢ **Tsunami** : 500-800 km/h (avion de ligne)

**Ã‰NERGIE :**
â€¢ **Vague normale** : Ã‰nergie de surface
â€¢ **Tsunami** : Ã‰nergie traversant toute la colonne d'eau

**COMPORTEMENT :**
â€¢ **Vague normale** : Brise sur la cÃ´te
â€¢ **Tsunami** : Inonde terres comme marÃ©e rapide
            """,
            "en": """
**ğŸŒŠ DIFFERENCE BETWEEN TSUNAMI AND NORMAL WAVE**

**ORIGIN:**
â€¢ **Normal wave**: Wind at surface
â€¢ **Tsunami**: Seabed disturbance (earthquake, landslide)

**PHYSICAL CHARACTERISTICS:**

**WAVELENGTH:**
â€¢ **Normal wave**: 100-200 meters
â€¢ **Tsunami**: 100-300 KILOMETERS

**SPEED:**
â€¢ **Normal wave**: 10-60 km/h
â€¢ **Tsunami**: 500-800 km/h (airliner speed)

**ENERGY:**
â€¢ **Normal wave**: Surface energy
â€¢ **Tsunami**: Energy through entire water column

**BEHAVIOR:**
â€¢ **Normal wave**: Breaks on coast
â€¢ **Tsunami**: Floods land like fast tide
            """,
            "ar": """
**ğŸŒŠ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ ÙˆØ§Ù„Ù…ÙˆØ¬Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©**

**Ø§Ù„Ù…ØµØ¯Ø±:**
â€¢ **Ø§Ù„Ù…ÙˆØ¬Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©**: Ø§Ù„Ø±ÙŠØ§Ø­ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø·Ø­
â€¢ **Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ**: Ø§Ø¶Ø·Ø±Ø§Ø¨ Ù‚Ø§Ø¹ Ø§Ù„Ø¨Ø­Ø± (Ø²Ù„Ø²Ø§Ù„ØŒ Ø§Ù†Ù‡ÙŠØ§Ø±)

**Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¦ÙŠØ©:**

**Ø§Ù„Ø·ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¬ÙŠ:**
â€¢ **Ø§Ù„Ù…ÙˆØ¬Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©**: 100-200 Ù…ØªØ±
â€¢ **Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ**: 100-300 ÙƒÙŠÙ„ÙˆÙ…ØªØ±

**Ø§Ù„Ø³Ø±Ø¹Ø©:**
â€¢ **Ø§Ù„Ù…ÙˆØ¬Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©**: 10-60 ÙƒÙ…/Ø³Ø§Ø¹Ø©
â€¢ **Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ**: 500-800 ÙƒÙ…/Ø³Ø§Ø¹Ø© (Ø³Ø±Ø¹Ø© Ø·Ø§Ø¦Ø±Ø©)

**Ø§Ù„Ø·Ø§Ù‚Ø©:**
â€¢ **Ø§Ù„Ù…ÙˆØ¬Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©**: Ø·Ø§Ù‚Ø© Ø³Ø·Ø­ÙŠØ©
â€¢ **Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ**: Ø·Ø§Ù‚Ø© Ø¹Ø¨Ø± Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ø§Ø¡ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„

**Ø§Ù„Ø³Ù„ÙˆÙƒ:**
â€¢ **Ø§Ù„Ù…ÙˆØ¬Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©**: ØªÙ†ÙƒØ³Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø§Ø­Ù„
â€¢ **Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ**: ÙŠØºÙ…Ø± Ø§Ù„Ø£Ø±Ø¶ Ù…Ø«Ù„ Ù…Ø¯ Ø³Ø±ÙŠØ¹
            """
        }
    },

    "causes_principales": {
        "keywords": {
            "fr": ["causes principales", "causes tsunamis", "origine tsunamis", "quoi cause tsunami"],
            "en": ["main causes", "tsunami causes", "what causes tsunami", "origin tsunami"],
            "ar": ["Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", "Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ", "Ù…Ø§Ø°Ø§ ÙŠØ³Ø¨Ø¨ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ", "Ø£ØµÙ„ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ"]
        },
        "responses": {
            "fr": """
**ğŸŒŠ CAUSES PRINCIPALES DES TSUNAMIS**

**1. SÃ‰ISMES SOUS-MARINS (88%)**
â€¢ **Magnitude** : â‰¥ 7.0 gÃ©nÃ©ralement
â€¢ **Type** : Subduction (vertical seabed movement)
â€¢ **Exemple** : Japon 2011 (magnitude 9.0)

**2. GLISSEMENTS DE TERRAIN (7%)**
â€¢ **Lieux** : Fjords, volcans, pentes raides
â€¢ **Volume** : Millions de mÂ³ nÃ©cessaires
â€¢ **Exemple** : Baie Lituya 1958 (524m vague)

**3. Ã‰RUPTIONS VOLCANIQUES (5%)**
â€¢ **MÃ©canismes** : Effondrement, explosion, pyroclastiques
â€¢ **Exemple** : Krakatoa 1883 (vagues 40m)

**4. IMPACTS MÃ‰TÃ‰ORITIQUES (rare)**
â€¢ **DiamÃ¨tre** : > 1km nÃ©cessaire
â€¢ **Ã‰nergie** : Ã‰quivalent millions bombes atomiques

**AUTRES CAUSES :**
â€¢ **Effondrements glaciers**
â€¢ **Explosions nuclÃ©aires** (thÃ©orique)
            """,
            "en": """
**ğŸŒŠ MAIN TSUNAMI CAUSES**

**1. UNDERSEA EARTHQUAKES (88%)**
â€¢ **Magnitude**: â‰¥ 7.0 generally
â€¢ **Type**: Subduction (vertical seabed movement)
â€¢ **Example**: Japan 2011 (magnitude 9.0)

**2. LANDSLIDES (7%)**
â€¢ **Locations**: Fjords, volcanoes, steep slopes
â€¢ **Volume**: Millions of mÂ³ required
â€¢ **Example**: Lituya Bay 1958 (524m wave)

**3. VOLCANIC ERUPTIONS (5%)**
â€¢ **Mechanisms**: Collapse, explosion, pyroclastic flows
â€¢ **Example**: Krakatoa 1883 (40m waves)

**4. METEORITE IMPACTS (rare)**
â€¢ **Diameter**: > 1km required
â€¢ **Energy**: Equivalent millions atomic bombs

**OTHER CAUSES:**
â€¢ **Glacier collapses**
â€¢ **Nuclear explosions** (theoretical)
            """,
            "ar": """
**ğŸŒŠ Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ**

**1. Ø§Ù„Ø²Ù„Ø§Ø²Ù„ ØªØ­Øª Ø§Ù„Ø¨Ø­Ø± (88%)**
â€¢ **Ø§Ù„Ù‚ÙˆØ©**: â‰¥ 7.0 Ø¹Ø§Ø¯Ø©
â€¢ **Ø§Ù„Ù†ÙˆØ¹**: Ø§Ù†Ø¯Ø³Ø§Ø³ (Ø­Ø±ÙƒØ© Ø±Ø£Ø³ÙŠØ© Ù„Ù‚Ø§Ø¹ Ø§Ù„Ø¨Ø­Ø±)
â€¢ **Ù…Ø«Ø§Ù„**: Ø§Ù„ÙŠØ§Ø¨Ø§Ù† 2011 (Ù‚ÙˆØ© 9.0)

**2. Ø§Ù„Ø§Ù†Ù‡ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ø±Ø¶ÙŠØ© (7%)**
â€¢ **Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹**: Ø§Ù„Ù…Ø¶Ø§ÙŠÙ‚ØŒ Ø§Ù„Ø¨Ø±Ø§ÙƒÙŠÙ†ØŒ Ø§Ù„Ù…Ù†Ø­Ø¯Ø±Ø§Øª Ø§Ù„Ø´Ø¯ÙŠØ¯Ø©
â€¢ **Ø§Ù„Ø­Ø¬Ù…**: Ù…Ù„Ø§ÙŠÙŠÙ† Ø§Ù„Ø£Ù…ØªØ§Ø± Ø§Ù„Ù…ÙƒØ¹Ø¨Ø© Ù…Ø·Ù„ÙˆØ¨Ø©
â€¢ **Ù…Ø«Ø§Ù„**: Ø®Ù„ÙŠØ¬ Ù„ÙŠØªÙˆÙŠØ§ 1958 (Ù…ÙˆØ¬Ø© 524Ù…)

**3. Ø§Ù„Ø«ÙˆØ±Ø§Øª Ø§Ù„Ø¨Ø±ÙƒØ§Ù†ÙŠØ© (5%)**
â€¢ **Ø§Ù„Ø¢Ù„ÙŠØ§Øª**: Ø§Ù„Ø§Ù†Ù‡ÙŠØ§Ø±ØŒ Ø§Ù„Ø§Ù†ÙØ¬Ø§Ø±ØŒ ØªØ¯ÙÙ‚Ø§Øª pyroclastic
â€¢ **Ù…Ø«Ø§Ù„**: ÙƒØ±Ø§ÙƒØ§ØªÙˆØ§ 1883 (Ø£Ù…ÙˆØ§Ø¬ 40Ù…)

**4. Ø§ØµØ·Ø¯Ø§Ù… Ø§Ù„Ù†ÙŠØ§Ø²Ùƒ (Ù†Ø§Ø¯Ø±)**
â€¢ **Ø§Ù„Ù‚Ø·Ø±**: > 1ÙƒÙ… Ù…Ø·Ù„ÙˆØ¨
â€¢ **Ø§Ù„Ø·Ø§Ù‚Ø©**: ØªØ¹Ø§Ø¯Ù„ Ù…Ù„Ø§ÙŠÙŠÙ† Ø§Ù„Ù‚Ù†Ø§Ø¨Ù„ Ø§Ù„Ø°Ø±ÙŠØ©

**Ø£Ø³Ø¨Ø§Ø¨ Ø£Ø®Ø±Ù‰:**
â€¢ **Ø§Ù†Ù‡ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¬Ù„ÙŠØ¯**
â€¢ **Ø§Ù„Ø§Ù†ÙØ¬Ø§Ø±Ø§Øª Ø§Ù„Ù†ÙˆÙˆÙŠØ©** (Ù†Ø¸Ø±ÙŠ)
            """
        }
    },

    "seisme_provoque_tsunami": {
        "keywords": {
            "fr": ["comment sÃ©isme provoque tsunami", "mÃ©canisme sÃ©isme tsunami", "sÃ©isme cause tsunami"],
            "en": ["how earthquake causes tsunami", "earthquake tsunami mechanism", "seismic tsunami"],
            "ar": ["ÙƒÙŠÙ ÙŠØ³Ø¨Ø¨ Ø§Ù„Ø²Ù„Ø²Ø§Ù„ ØªØ³ÙˆÙ†Ø§Ù…ÙŠ", "Ø¢Ù„ÙŠØ© Ø²Ù„Ø²Ø§Ù„ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ", "Ø²Ù„Ø²Ø§Ù„ ÙŠØ³Ø¨Ø¨ ØªØ³ÙˆÙ†Ø§Ù…ÙŠ"]
        },
        "responses": {
            "fr": """
**ğŸŒŠ COMMENT UN SÃ‰ISME PROVOQUE UN TSUNAMI**

**CONDITIONS NÃ‰CESSAIRES :**
â€¢ **Magnitude** : â‰¥ 6.5 (gÃ©nÃ©ralement â‰¥ 7.0)
â€¢ **Profondeur** : < 70km (sÃ©isme superficiel)
â€¢ **MÃ©canisme** : Mouvement VERTICAL du fond marin

**MÃ‰CANISME DÃ‰TAILLÃ‰ :**

**1. RUPTURE DE FAILLE**
â€¢ Faille sous-marine se rompt
â€¢ DÃ©placement vertical du plancher ocÃ©anique
â€¢ DÃ©placement typique : 5-20 mÃ¨tres

**2. DÃ‰FORMATION DE LA SURFACE**
â€¢ Colonne d'eau dÃ©placÃ©e vers le haut/le bas
â€¢ CrÃ©ation d'une "bosse" d'eau Ã  la surface
â€¢ Ã‰nergie transmise Ã  toute la colonne d'eau

**3. FORMATION DES VAGUES**
â€¢ La bosse s'effondre sous gravitÃ©
â€¢ GÃ©nÃ©ration d'ondes longues dans toutes directions
â€¢ Ã‰nergie proportionnelle au dÃ©placement

**TYPES DE SÃ‰ISMES FAVORABLES :**
â€¢ **Subduction** : TrÃ¨s dangereux (Japon 2011)
â€¢ **MÃ©gafailles** : DÃ©placement important
â€¢ **Failles normales/inverses** : Composante verticale
            """,
            "en": """
**ğŸŒŠ HOW EARTHQUAKE CAUSES TSUNAMI**

**NECESSARY CONDITIONS:**
â€¢ **Magnitude**: â‰¥ 6.5 (generally â‰¥ 7.0)
â€¢ **Depth**: < 70km (shallow earthquake)
â€¢ **Mechanism**: VERTICAL seabed movement

**DETAILED MECHANISM:**

**1. FAULT RUPTURE**
â€¢ Undersea fault breaks
â€¢ Vertical displacement of ocean floor
â€¢ Typical displacement: 5-20 meters

**2. SURFACE DEFORMATION**
â€¢ Water column displaced upward/downward
â€¢ Creation of water "bump" at surface
â€¢ Energy transmitted to entire water column

**3. WAVE FORMATION**
â€¢ Bump collapses under gravity
â€¢ Generation of long waves in all directions
â€¢ Energy proportional to displacement

**FAVORABLE EARTHQUAKE TYPES:**
â€¢ **Subduction**: Very dangerous (Japan 2011)
â€¢ **Megafaults**: Significant displacement
â€¢ **Normal/reverse faults**: Vertical component
            """,
            "ar": """
**ğŸŒŠ ÙƒÙŠÙ ÙŠØ³Ø¨Ø¨ Ø§Ù„Ø²Ù„Ø²Ø§Ù„ ØªØ³ÙˆÙ†Ø§Ù…ÙŠ**

**Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©:**
â€¢ **Ø§Ù„Ù‚ÙˆØ©**: â‰¥ 6.5 (Ø¹Ø§Ø¯Ø© â‰¥ 7.0)
â€¢ **Ø§Ù„Ø¹Ù…Ù‚**: < 70ÙƒÙ… (Ø²Ù„Ø²Ø§Ù„ Ø³Ø·Ø­ÙŠ)
â€¢ **Ø§Ù„Ø¢Ù„ÙŠØ©**: Ø­Ø±ÙƒØ© Ø±Ø£Ø³ÙŠØ© Ù„Ù‚Ø§Ø¹ Ø§Ù„Ø¨Ø­Ø±

**Ø§Ù„Ø¢Ù„ÙŠØ© Ø§Ù„Ù…ÙØµÙ„Ø©:**

**1. ØªÙ…Ø²Ù‚ Ø§Ù„ØµØ¯Ø¹**
â€¢ Ø§Ù†ÙƒØ³Ø§Ø± Ø§Ù„ØµØ¯Ø¹ ØªØ­Øª Ø§Ù„Ø¨Ø­Ø±
â€¢ Ø¥Ø²Ø§Ø­Ø© Ø±Ø£Ø³ÙŠØ© Ù„Ù‚Ø§Ø¹ Ø§Ù„Ù…Ø­ÙŠØ·
â€¢ Ø§Ù„Ø¥Ø²Ø§Ø­Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ©: 5-20 Ù…ØªØ±

**2. ØªØ´ÙˆÙ‡ Ø§Ù„Ø³Ø·Ø­**
â€¢ Ø¥Ø²Ø§Ø­Ø© Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ø§Ø¡ Ù„Ø£Ø¹Ù„Ù‰/Ø£Ø³ÙÙ„
â€¢ ØªÙƒÙˆÙŠÙ† "Ù†ØªÙˆØ¡" Ù…Ø§Ø¦ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø·Ø­
â€¢ Ù†Ù‚Ù„ Ø§Ù„Ø·Ø§Ù‚Ø© Ø¥Ù„Ù‰ Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ø§Ø¡ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„

**3. ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù…ÙˆØ¬Ø©**
â€¢ Ø§Ù†Ù‡ÙŠØ§Ø± Ø§Ù„Ù†ØªÙˆØ¡ ØªØ­Øª Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ©
â€¢ ØªÙˆÙ„ÙŠØ¯ Ø£Ù…ÙˆØ§Ø¬ Ø·ÙˆÙŠÙ„Ø© ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª
â€¢ Ø§Ù„Ø·Ø§Ù‚Ø© Ù…ØªÙ†Ø§Ø³Ø¨Ø© Ù…Ø¹ Ø§Ù„Ø¥Ø²Ø§Ø­Ø©

**Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø²Ù„Ø§Ø²Ù„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:**
â€¢ **Ø§Ù„Ø§Ù†Ø¯Ø³Ø§Ø³**: Ø®Ø·ÙŠØ± Ø¬Ø¯Ù‹Ø§ (Ø§Ù„ÙŠØ§Ø¨Ø§Ù† 2011)
â€¢ **Ø§Ù„ØµØ¯ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ù‚Ø©**: Ø¥Ø²Ø§Ø­Ø© ÙƒØ¨ÙŠØ±Ø©
â€¢ **Ø§Ù„ØµØ¯ÙˆØ¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©/Ø§Ù„Ù…Ø¹ÙƒÙˆØ³Ø©**: Ù…ÙƒÙˆÙ† Ø±Ø£Ø³ÙŠ
            """
        }
    },

    "tsunamis_volcaniques_glissements": {
        "keywords": {
            "fr": ["tsunamis volcaniques", "tsunamis glissements terrain", "volcan tsunami", "glissement tsunami"],
            "en": ["volcanic tsunamis", "landslide tsunamis", "volcano tsunami", "landslide tsunami"],
            "ar": ["ØªØ³ÙˆÙ†Ø§Ù…ÙŠ Ø¨Ø±ÙƒØ§Ù†ÙŠ", "ØªØ³ÙˆÙ†Ø§Ù…ÙŠ Ø§Ù†Ù‡ÙŠØ§Ø± Ø£Ø±Ø¶ÙŠ", "Ø¨Ø±ÙƒØ§Ù† ØªØ³ÙˆÙ†Ø§Ù…ÙŠ", "Ø§Ù†Ù‡ÙŠØ§Ø± ØªØ³ÙˆÙ†Ø§Ù…ÙŠ"]
        },
        "responses": {
            "fr": """
**ğŸŒŠ TSUNAMIS VOLCANIQUES ET GLISSEMENTS**

**TSUNAMIS VOLCANIQUES :**

**MÃ‰CANISMES :**
â€¢ **Effondrement caldera** : Krakatoa 1883
â€¢ **Flux pyroclastiques** : EntrÃ©e dans la mer
â€¢ **Explosions violentes** : Vapeur surchauffÃ©e
â€¢ **Tremblements volcaniques** : InstabilitÃ© pentes

**EXEMPLES CÃ‰LÃˆBRES :**
â€¢ **Krakatoa 1883** : 40m vagues, 36,000 morts
â€¢ **Santorin 1600 av.J-C** : Possible fin civilisation minoenne
â€¢ **Anak Krakatau 2018** : Glissement volcanique

**TSUNAMIS PAR GLISSEMENTS :**

**TYPES DE GLISSEMENTS :**
â€¢ **Sous-marins** : Pentes continentales
â€¢ **AÃ©riens** : Roches tombant dans l'eau
â€¢ **SÃ©diments** : LiquÃ©faction pentes

**CARACTÃ‰RISTIQUES :**
â€¢ **LocalisÃ©s** mais extrÃªmement destructeurs
â€¢ **Hauteurs Ã©normes** dans baies fermÃ©es
â€¢ **Aucun avertissement** sismique

**EXEMPLE EXTRÃŠME :**
â€¢ **Baie Lituya 1958** : 524m vague record
â€¢ **Glissement rocheux** : 30 millions mÂ³
â€¢ **2 survivants** dans bateaux
            """,
            "en": """
**ğŸŒŠ VOLCANIC AND LANDSLIDE TSUNAMIS**

**VOLCANIC TSUNAMIS:**

**MECHANISMS:**
â€¢ **Caldera collapse**: Krakatoa 1883
â€¢ **Pyroclastic flows**: Entering sea
â€¢ **Violent explosions**: Superheated steam
â€¢ **Volcanic tremors**: Slope instability

**FAMOUS EXAMPLES:**
â€¢ **Krakatoa 1883**: 40m waves, 36,000 deaths
â€¢ **Santorini 1600 BC**: Possible end Minoan civilization
â€¢ **Anak Krakatau 2018**: Volcanic landslide

**LANDSLIDE TSUNAMIS:**

**LANDSLIDE TYPES:**
â€¢ **Submarine**: Continental slopes
â€¢ **Aerial**: Rocks falling into water
â€¢ **Sediments**: Slope liquefaction

**CHARACTERISTICS:**
â€¢ **Localized** but extremely destructive
â€¢ **Enormous heights** in closed bays
â€¢ **No seismic warning**

**EXTREME EXAMPLE:**
â€¢ **Lituya Bay 1958**: 524m record wave
â€¢ **Rock landslide**: 30 million mÂ³
â€¢ **2 survivors** in boats
            """,
            "ar": """
**ğŸŒŠ ØªØ³ÙˆÙ†Ø§Ù…ÙŠ Ø§Ù„Ø¨Ø±Ø§ÙƒÙŠÙ† ÙˆØ§Ù„Ø§Ù†Ù‡ÙŠØ§Ø±Ø§Øª**

**ØªØ³ÙˆÙ†Ø§Ù…ÙŠ Ø§Ù„Ø¨Ø±Ø§ÙƒÙŠÙ†:**

**Ø§Ù„Ø¢Ù„ÙŠØ§Øª:**
â€¢ **Ø§Ù†Ù‡ÙŠØ§Ø± ÙƒØ§Ù„Ø¯ÙŠØ±Ø§**: ÙƒØ±Ø§ÙƒØ§ØªÙˆØ§ 1883
â€¢ **Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª pyroclastic**: Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¨Ø­Ø±
â€¢ **Ø§Ù†ÙØ¬Ø§Ø±Ø§Øª Ø¹Ù†ÙŠÙØ©**: Ø¨Ø®Ø§Ø± Ù…Ø­Ù…Øµ
â€¢ **Ù‡Ø²Ø§Øª Ø¨Ø±ÙƒØ§Ù†ÙŠØ©**: Ø¹Ø¯Ù… Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„Ù…Ù†Ø­Ø¯Ø±Ø§Øª

**Ø£Ù…Ø«Ù„Ø© Ù…Ø´Ù‡ÙˆØ±Ø©:**
â€¢ **ÙƒØ±Ø§ÙƒØ§ØªÙˆØ§ 1883**: Ø£Ù…ÙˆØ§Ø¬ 40Ù…ØŒ 36,000 Ù‚ØªÙŠÙ„
â€¢ **Ø³Ø§Ù†ØªÙˆØ±ÙŠÙ†ÙŠ 1600 Ù‚.Ù…**: Ø§Ø­ØªÙ…Ø§Ù„ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø­Ø¶Ø§Ø±Ø© Ø§Ù„Ù…ÙŠÙ†ÙˆÙŠØ©
â€¢ **Ø£Ù†Ø§Ùƒ ÙƒØ±Ø§ÙƒØ§ØªÙˆØ§ 2018**: Ø§Ù†Ù‡ÙŠØ§Ø± Ø¨Ø±ÙƒØ§Ù†ÙŠ

**ØªØ³ÙˆÙ†Ø§Ù…ÙŠ Ø§Ù„Ø§Ù†Ù‡ÙŠØ§Ø±Ø§Øª:**

**Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø§Ù†Ù‡ÙŠØ§Ø±Ø§Øª:**
â€¢ **ØªØ­Øª Ø§Ù„Ø¨Ø­Ø±**: Ø§Ù„Ù…Ù†Ø­Ø¯Ø±Ø§Øª Ø§Ù„Ù‚Ø§Ø±ÙŠØ©
â€¢ **Ù‡ÙˆØ§Ø¦ÙŠ**: ØµØ®ÙˆØ± ØªØ³Ù‚Ø· ÙÙŠ Ø§Ù„Ù…Ø§Ø¡
â€¢ **Ø§Ù„Ø±ÙˆØ§Ø³Ø¨**: ØªÙ…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø­Ø¯Ø±Ø§Øª

**Ø§Ù„Ø®ØµØ§Ø¦Øµ:**
â€¢ **Ù…ÙˆØ¶Ø¹ÙŠ** ÙˆÙ„ÙƒÙ†Ù‡ Ù…Ø¯Ù…Ø± Ù„Ù„ØºØ§ÙŠØ©
â€¢ **Ø§Ø±ØªÙØ§Ø¹Ø§Øª Ù‡Ø§Ø¦Ù„Ø©** ÙÙŠ Ø§Ù„Ø®Ù„Ø¬Ø§Ù† Ø§Ù„Ù…ØºÙ„Ù‚Ø©
â€¢ **Ù„Ø§ Ø¥Ù†Ø°Ø§Ø± Ø²Ù„Ø²Ø§Ù„ÙŠ**

**Ù…Ø«Ø§Ù„ Ù…ØªØ·Ø±Ù:**
â€¢ **Ø®Ù„ÙŠØ¬ Ù„ÙŠØªÙˆÙŠØ§ 1958**: Ù…ÙˆØ¬Ø© Ù‚ÙŠØ§Ø³ÙŠØ© 524Ù…
â€¢ **Ø§Ù†Ù‡ÙŠØ§Ø± ØµØ®Ø±ÙŠ**: 30 Ù…Ù„ÙŠÙˆÙ† Ù…Â³
â€¢ **Ù†Ø§Ø¬ÙŠØ§Ù†** ÙÙŠ Ù‚ÙˆØ§Ø±Ø¨
            """
        }
    },

    "signes_precurseurs": {
        "keywords": {
            "fr": ["signes prÃ©curseurs", "signes avant coureur", "avertissement tsunami", "reconnaÃ®tre tsunami"],
            "en": ["warning signs", "precursors signs", "tsunami warning", "recognize tsunami"],
            "ar": ["Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø¥Ù†Ø°Ø§Ø±", "Ø¹Ù„Ø§Ù…Ø§Øª Ù…Ø³Ø¨Ù‚Ø©", "Ø¥Ù†Ø°Ø§Ø± ØªØ³ÙˆÙ†Ø§Ù…ÙŠ", "Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ"]
        },
        "responses": {
            "fr": """
**ğŸŒŠ SIGNES PRÃ‰CURSEURS D'UN TSUNAMI**

**SIGNAUX NATURELS (IMMÃ‰DIATS) :**

**1. SÃ‰ISME FORT ET LONG**
â€¢ Secousse > 20 secondes
â€¢ DifficultÃ© Ã  se tenir debout
â€¢ **Ã‰vacuer SANS attendre l'alerte**

**2. RECUL ANORMAL DE LA MER**
â€¢ Mer qui se retire anormalement
â€¢ Fond marin dÃ©couvert
â€¢ **DANGER EXTRÃŠME** - Vague arrive dans 5-20 min

**3. BRUIT INHABITEL**
â€¢ Bruit de train ou avion approchant
â€¢ Grondement sourd de l'ocÃ©an

**4. COMPORTEMENT ANIMAUX**
â€¢ Animaux qui fuient vers les hauteurs
â€¢ Oiseaux qui s'envolent inquiets

**ALERTES OFFICIELLES :**

**SYSTÃˆMES D'ALERTE :**
â€¢ **Sirenes cÃ´tiÃ¨res**
â€¢ **Messages tÃ©lÃ©phone/radio**
â€¢ **Bulletins mÃ©tÃ©orologiques**

**RÃˆGLE D'OR :**
â€¢ **SÃ©isme fort + CÃ´te = Ã‰VACUATION IMMÃ‰DIATE**
â€¢ **Ne pas attendre l'alerte officielle**
â€¢ **Aller vers les hauteurs > 15m**
            """,
            "en": """
**ğŸŒŠ TSUNAMI WARNING SIGNS**

**NATURAL SIGNALS (IMMEDIATE):**

**1. STRONG AND LONG EARTHQUAKE**
â€¢ Shaking > 20 seconds
â€¢ Difficulty standing
â€¢ **EVACUATE WITHOUT waiting for warning**

**2. ABNORMAL SEA RETREAT**
â€¢ Sea withdrawing abnormally
â€¢ Seabed uncovered
â€¢ **EXTREME DANGER** - Wave arrives in 5-20 min

**3. UNUSUAL NOISE**
â€¢ Sound of approaching train or plane
â€¢ Deep ocean roar

**4. ANIMAL BEHAVIOR**
â€¢ Animals fleeing to high ground
â€¢ Birds flying away anxiously

**OFFICIAL ALERTS:**

**WARNING SYSTEMS:**
â€¢ **Coastal sirens**
â€¢ **Phone/radio messages**
â€¢ **Weather bulletins**

**GOLDEN RULE:**
â€¢ **Strong earthquake + Coast = IMMEDIATE EVACUATION**
â€¢ **Don't wait for official warning**
â€¢ **Go to heights > 15m**
            """,
            "ar": """
**ğŸŒŠ Ø¹Ù„Ø§Ù…Ø§Øª Ø¥Ù†Ø°Ø§Ø± Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ**

**Ø¥Ø´Ø§Ø±Ø§Øª Ø·Ø¨ÙŠØ¹ÙŠØ© (ÙÙˆØ±ÙŠØ©):**

**1. Ø²Ù„Ø²Ø§Ù„ Ù‚ÙˆÙŠ ÙˆØ·ÙˆÙŠÙ„**
â€¢ Ù‡Ø²Ø© > 20 Ø«Ø§Ù†ÙŠØ©
â€¢ ØµØ¹ÙˆØ¨Ø© ÙÙŠ Ø§Ù„ÙˆÙ‚ÙˆÙ
â€¢ **Ø§Ø®Ù„Ø§Ø¡ Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¥Ù†Ø°Ø§Ø±**

**2. ØªØ±Ø§Ø¬Ø¹ ØºÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠ Ù„Ù„Ø¨Ø­Ø±**
â€¢ Ø§Ù„Ø¨Ø­Ø± ÙŠØªØ±Ø§Ø¬Ø¹ Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠ
â€¢ Ù‚Ø§Ø¹ Ø§Ù„Ø¨Ø­Ø± Ù…ÙƒØ´ÙˆÙ
â€¢ **Ø®Ø·Ø± Ø´Ø¯ÙŠØ¯** - Ø§Ù„Ù…ÙˆØ¬Ø© ØªØµÙ„ Ø®Ù„Ø§Ù„ 5-20 Ø¯Ù‚ÙŠÙ‚Ø©

**3. Ø¶Ø¬ÙŠØ¬ ØºÙŠØ± Ù…Ø¹ØªØ§Ø¯**
â€¢ ØµÙˆØª Ù‚Ø·Ø§Ø± Ø£Ùˆ Ø·Ø§Ø¦Ø±Ø© ØªÙ‚ØªØ±Ø¨
â€¢ Ù‡Ø¯ÙŠØ± Ù…Ø­ÙŠØ· Ø¹Ù…ÙŠÙ‚

**4. Ø³Ù„ÙˆÙƒ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª**
â€¢ Ø­ÙŠÙˆØ§Ù†Ø§Øª ØªÙ‡Ø±Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø±ØªÙØ¹Ø§Øª
â€¢ Ø·ÙŠÙˆØ± ØªØ·ÙŠØ± Ø¨Ø¹ÙŠØ¯Ù‹Ø§ Ø¨Ù‚Ù„Ù‚

**ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø±Ø³Ù…ÙŠØ©:**

**Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø¥Ù†Ø°Ø§Ø±:**
â€¢ **ØµÙØ§Ø±Ø§Øª Ø³Ø§Ø­Ù„ÙŠØ©**
â€¢ **Ø±Ø³Ø§Ø¦Ù„ Ù‡Ø§ØªÙ/Ø±Ø§Ø¯ÙŠÙˆ**
â€¢ **Ù†Ø´Ø±Ø§Øª Ø§Ù„Ø·Ù‚Ø³**

**Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©:**
â€¢ **Ø²Ù„Ø²Ø§Ù„ Ù‚ÙˆÙŠ + Ø³Ø§Ø­Ù„ = Ø¥Ø®Ù„Ø§Ø¡ ÙÙˆØ±ÙŠ**
â€¢ **Ù„Ø§ ØªÙ†ØªØ¸Ø± Ø§Ù„Ø¥Ù†Ø°Ø§Ø± Ø§Ù„Ø±Ø³Ù…ÙŠ**
â€¢ **Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Ù…Ø±ØªÙØ¹Ø§Øª > 15Ù…**
            """
        }
    },

    "consequences_humaines": {
        "keywords": {
            "fr": ["consÃ©quences humaines", "victimes tsunami", "morts tsunami", "impact humain"],
            "en": ["human consequences", "tsunami victims", "tsunami deaths", "human impact"],
            "ar": ["Ø§Ù„Ø¹ÙˆØ§Ù‚Ø¨ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©", "Ø¶Ø­Ø§ÙŠØ§ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ", "ÙˆÙÙŠØ§Øª Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ", "Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¨Ø´Ø±ÙŠ"]
        },
        "responses": {
            "fr": """
**ğŸŒŠ CONSÃ‰QUENCES HUMAINES DES TSUNAMIS**

**EFFETS IMMÃ‰DIATS :**

**1. MORTALITÃ‰ MASSIVE**
â€¢ **Noyade** : Cause principale (80-90%)
â€¢ **Traumatismes** : Impact dÃ©bris, bÃ¢timents
â€¢ **2004 OcÃ©an Indien** : 230,000-280,000 morts

**2. BLESSURES GRAVES**
â€¢ Fractures multiples
â€¢ Infections (eau contaminÃ©e)
â€¢ Syndrome de crush (compression)

**3. DISPARITIONS**
â€¢ Corps emportÃ©s en mer
â€¢ Identification difficile
â€¢ Familles sans closure

**EFFETS Ã€ MOYEN TERME :**

**1. CRISE SANITAIRE**
â€¢ Eau potable contaminÃ©e
â€¢ Maladies hydriques (cholÃ©ra, typhoÃ¯de)
â€¢ Absence soins mÃ©dicaux

**2. TRAUMATISMES PSYCHOLOGIQUES**
â€¢ SSPT (60-70% survivants)
â€¢ DÃ©pression, anxiÃ©tÃ©
â€¢ Deuil collectif

**3. DÃ‰PLACEMENTS DE POPULATION**
â€¢ **2004** : 1.7 million dÃ©placÃ©s
â€¢ **2011 Japon** : 470,000 Ã©vacuÃ©s
â€¢ Villages entiers disparus
            """,
            "en": """
**ğŸŒŠ HUMAN CONSEQUENCES OF TSUNAMIS**

**IMMEDIATE EFFECTS:**

**1. MASS MORTALITY**
â€¢ **Drowning**: Main cause (80-90%)
â€¢ **Trauma**: Impact debris, buildings
â€¢ **2004 Indian Ocean**: 230,000-280,000 deaths

**2. SERIOUS INJURIES**
â€¢ Multiple fractures
â€¢ Infections (contaminated water)
â€¢ Crush syndrome

**3. DISAPPEARANCES**
â€¢ Bodies swept out to sea
â€¢ Difficult identification
â€¢ Families without closure

**MEDIUM-TERM EFFECTS:**

**1. HEALTH CRISIS**
â€¢ Contaminated drinking water
â€¢ Waterborne diseases (cholera, typhoid)
â€¢ Absence medical care

**2. PSYCHOLOGICAL TRAUMA**
â€¢ PTSD (60-70% survivors)
â€¢ Depression, anxiety
â€¢ Collective grief

**3. POPULATION DISPLACEMENT**
â€¢ **2004**: 1.7 million displaced
â€¢ **2011 Japan**: 470,000 evacuated
â€¢ Entire villages disappeared
            """,
            "ar": """
**ğŸŒŠ Ø§Ù„Ø¹ÙˆØ§Ù‚Ø¨ Ø§Ù„Ø¨Ø´Ø±ÙŠØ© Ù„Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ**

**Ø§Ù„Ø¢Ø«Ø§Ø± Ø§Ù„ÙÙˆØ±ÙŠØ©:**

**1. ÙˆÙÙŠØ§Øª Ø¬Ù…Ø§Ø¹ÙŠØ©**
â€¢ **Ø§Ù„ØºØ±Ù‚**: Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (80-90%)
â€¢ **Ø§Ù„ØµØ¯Ù…Ø§Øª**: ØªØ£Ø«ÙŠØ± Ø§Ù„Ø­Ø·Ø§Ù…ØŒ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ
â€¢ **2004 Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù‡Ù†Ø¯ÙŠ**: 230,000-280,000 Ù‚ØªÙŠÙ„

**2. Ø¥ØµØ§Ø¨Ø§Øª Ø®Ø·ÙŠØ±Ø©**
â€¢ ÙƒØ³ÙˆØ± Ù…ØªØ¹Ø¯Ø¯Ø©
â€¢ Ø§Ù„ØªÙ‡Ø§Ø¨Ø§Øª (Ù…Ø§Ø¡ Ù…Ù„ÙˆØ«)
â€¢ Ù…ØªÙ„Ø§Ø²Ù…Ø© Ø§Ù„Ø³Ø­Ù‚

**3. Ø§Ø®ØªÙØ§Ø¡Ø§Øª**
â€¢ Ø¬Ø«Ø« Ø¬Ø±ÙÙ‡Ø§ Ø§Ù„Ø¨Ø­Ø±
â€¢ ØªØ­Ø¯ÙŠØ¯ Ù‡ÙˆÙŠØ© ØµØ¹Ø¨
â€¢ Ø¹Ø§Ø¦Ù„Ø§Øª Ø¨Ø¯ÙˆÙ† Ø¥Ù†Ù‡Ø§Ø¡

**Ø§Ù„Ø¢Ø«Ø§Ø± Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ù…Ø¯Ù‰:**

**1. Ø£Ø²Ù…Ø© ØµØ­ÙŠØ©**
â€¢ Ù…ÙŠØ§Ù‡ Ø´Ø±Ø¨ Ù…Ù„ÙˆØ«Ø©
â€¢ Ø£Ù…Ø±Ø§Ø¶ ØªÙ†Ù‚Ù„Ù‡Ø§ Ø§Ù„Ù…ÙŠØ§Ù‡ (ÙƒÙˆÙ„ÙŠØ±Ø§ØŒ ØªÙŠÙÙˆØ¦ÙŠØ¯)
â€¢ ØºÙŠØ§Ø¨ Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø·Ø¨ÙŠØ©

**2. ØµØ¯Ù…Ø§Øª Ù†ÙØ³ÙŠØ©**
â€¢ Ø§Ø¶Ø·Ø±Ø§Ø¨ Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„ØµØ¯Ù…Ø© (60-70% Ù…Ù† Ø§Ù„Ù†Ø§Ø¬ÙŠÙ†)
â€¢ Ø§ÙƒØªØ¦Ø§Ø¨ØŒ Ù‚Ù„Ù‚
â€¢ Ø­Ø²Ù† Ø¬Ù…Ø§Ø¹ÙŠ

**3. Ù†Ø²ÙˆØ­ Ø§Ù„Ø³ÙƒØ§Ù†**
â€¢ **2004**: 1.7 Ù…Ù„ÙŠÙˆÙ† Ù†Ø§Ø²Ø­
â€¢ **2011 Ø§Ù„ÙŠØ§Ø¨Ø§Ù†**: 470,000 Ù…ÙØ®Ù„Ù‰
â€¢ Ù‚Ø±Ù‰ ÙƒØ§Ù…Ù„Ø© Ø§Ø®ØªÙØª
            """
        }
    },

    # ... (continuez avec toutes les autres catÃ©gories de questions)

    "vague_plus_haute": {
        "keywords": {
            "fr": ["vague plus haute", "record hauteur", "plus haute vague", "vague maximale"],
            "en": ["highest wave", "height record", "highest wave", "maximum wave"],
            "ar": ["Ø£Ø¹Ù„Ù‰ Ù…ÙˆØ¬Ø©", "Ø±Ù‚Ù… Ù‚ÙŠØ§Ø³ÙŠ Ø§Ø±ØªÙØ§Ø¹", "Ø£Ø¹Ù„Ù‰ Ù…ÙˆØ¬Ø©", "Ø§Ù„Ù…ÙˆØ¬Ø© Ø§Ù„Ù‚ØµÙˆÙ‰"]
        },
        "responses": {
            "fr": """
**ğŸŒŠ RECORDS DE HAUTEUR DE VAGUES DE TSUNAMI**

**RECORD ABSOLU : BAIE LITUYA 1958**

**CaractÃ©ristiques :**
- **Hauteur** : 524 mÃ¨tres (1,720 pieds)
- **Lieu** : Alaska, Ã‰tats-Unis
- **Cause** : Glissement terrain massif (30 millions mÂ³)
- **MÃ©canisme** : Roche tombant dans fjord Ã©troit

**DÃ©tails :**
- **Ã‰nergie** : Ã‰quivalent 30 millions tonnes TNT
- **Survivants** : 2 bateaux (miraculeusement)
- **ForÃªt** : Arbres arrachÃ©s jusqu'Ã  524m d'altitude

**AUTRES RECORDS NOTABLES :**

**1. JAPON 2011**
- **Hauteur** : 40.5 mÃ¨tres
- **Lieu** : Miyako, Iwate
- **Cause** : SÃ©isme magnitude 9.0

**2. INDONÃ‰SIE 2004**
- **Hauteur** : 30 mÃ¨tres
- **Lieu** : Banda Aceh
- **Cause** : SÃ©isme magnitude 9.1

**3. ALASKA 1964**
- **Hauteur** : 67 mÃ¨tres
- **Lieu** : Valdez Inlet
- **Cause** : SÃ©isme magnitude 9.2
            """,
            "en": """
**ğŸŒŠ TSUNAMI WAVE HEIGHT RECORDS**

**ABSOLUTE RECORD: LITUYA BAY 1958**

**Characteristics:**
- **Height**: 524 meters (1,720 feet)
- **Location**: Alaska, USA
- **Cause**: Massive landslide (30 million mÂ³)
- **Mechanism**: Rock falling into narrow fjord

**Details:**
- **Energy**: Equivalent to 30 million tons TNT
- **Survivors**: 2 boats (miraculously)
- **Forest**: Trees uprooted up to 524m altitude

**OTHER NOTABLE RECORDS:**

**1. JAPAN 2011**
- **Height**: 40.5 meters
- **Location**: Miyako, Iwate
- **Cause**: Magnitude 9.0 earthquake

**2. INDONESIA 2004**
- **Height**: 30 meters
- **Location**: Banda Aceh
- **Cause**: Magnitude 9.1 earthquake

**3. ALASKA 1964**
- **Height**: 67 meters
- **Location**: Valdez Inlet
- **Cause**: Magnitude 9.2 earthquake
            """,
            "ar": """
**ğŸŒŠ Ø£Ø±Ù‚Ø§Ù… Ù‚ÙŠØ§Ø³ÙŠØ© Ù„Ø§Ø±ØªÙØ§Ø¹ Ø£Ù…ÙˆØ§Ø¬ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ**

**Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ Ø§Ù„Ù…Ø·Ù„Ù‚: Ø®Ù„ÙŠØ¬ Ù„ÙŠØªÙˆÙŠØ§ 1958**

**Ø§Ù„Ø®ØµØ§Ø¦Øµ:**
- **Ø§Ù„Ø§Ø±ØªÙØ§Ø¹**: 524 Ù…ØªØ± (1,720 Ù‚Ø¯Ù…)
- **Ø§Ù„Ù…ÙˆÙ‚Ø¹**: Ø£Ù„Ø§Ø³ÙƒØ§ØŒ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©
- **Ø§Ù„Ø³Ø¨Ø¨**: Ø§Ù†Ù‡ÙŠØ§Ø± Ø£Ø±Ø¶ÙŠ Ù‡Ø§Ø¦Ù„ (30 Ù…Ù„ÙŠÙˆÙ† Ù…Â³)
- **Ø§Ù„Ø¢Ù„ÙŠØ©**: ØµØ®ÙˆØ± ØªØ³Ù‚Ø· ÙÙŠ Ù…Ø¶ÙŠÙ‚ Ø¶ÙŠÙ‚

**Ø§Ù„ØªÙØ§ØµÙŠÙ„:**
- **Ø§Ù„Ø·Ø§Ù‚Ø©**: ØªØ¹Ø§Ø¯Ù„ 30 Ù…Ù„ÙŠÙˆÙ† Ø·Ù† Ù…Ù† TNT
- **Ø§Ù„Ù†Ø§Ø¬ÙˆÙ†**: Ù‚Ø§Ø±Ø¨Ø§Ù† (Ø¨Ù…Ø¹Ø¬Ø²Ø©)
- **Ø§Ù„ØºØ§Ø¨Ø©**: Ø£Ø´Ø¬Ø§Ø± Ø§Ù‚ØªÙ„Ø¹Øª Ø­ØªÙ‰ Ø§Ø±ØªÙØ§Ø¹ 524Ù…

**Ø£Ø±Ù‚Ø§Ù… Ù‚ÙŠØ§Ø³ÙŠØ© Ø£Ø®Ø±Ù‰ Ù…Ù„Ø­ÙˆØ¸Ø©:**

**1. Ø§Ù„ÙŠØ§Ø¨Ø§Ù† 2011**
- **Ø§Ù„Ø§Ø±ØªÙØ§Ø¹**: 40.5 Ù…ØªØ±
- **Ø§Ù„Ù…ÙˆÙ‚Ø¹**: Ù…ÙŠØ§ÙƒÙˆØŒ Ø¥ÙˆØ§ØªÙŠ
- **Ø§Ù„Ø³Ø¨Ø¨**: Ø²Ù„Ø²Ø§Ù„ Ù‚ÙˆØ© 9.0

**2. Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ§ 2004**
- **Ø§Ù„Ø§Ø±ØªÙØ§Ø¹**: 30 Ù…ØªØ±
- **Ø§Ù„Ù…ÙˆÙ‚Ø¹**: Ø¨Ø§Ù†Ø¯Ø§ Ø¢ØªØ´ÙŠÙ‡
- **Ø§Ù„Ø³Ø¨Ø¨**: Ø²Ù„Ø²Ø§Ù„ Ù‚ÙˆØ© 9.1

**3. Ø£Ù„Ø§Ø³ÙƒØ§ 1964**
- **Ø§Ù„Ø§Ø±ØªÙØ§Ø¹**: 67 Ù…ØªØ±
- **Ø§Ù„Ù…ÙˆÙ‚Ø¹**: Ù…Ø¶ÙŠÙ‚ ÙØ§Ù„Ø¯ÙŠØ²
- **Ø§Ù„Ø³Ø¨Ø¨**: Ø²Ù„Ø²Ø§Ù„ Ù‚ÙˆØ© 9.2
            """
        }
    }
}

# ==================== AJOUTEZ TOUTES LES AUTRES CATÃ‰GORIES ICI ====================

# ... (vous devrez ajouter toutes les autres catÃ©gories de questions manquantes)

# ==================== FONCTION DE RECHERCHE AMÃ‰LIORÃ‰E ====================

def find_response(user_input, language):
    """Trouve la rÃ©ponse la plus pertinente avec reconnaissance amÃ©liorÃ©e"""
    user_input_lower = user_input.lower()
    
    # Recherche amÃ©liorÃ©e - vÃ©rifie chaque mot-clÃ© individuellement
    best_match = None
    best_score = 0
    
    for category, data in KNOWLEDGE_BASE.items():
        score = 0
        for keyword in data["keywords"][language]:
            if keyword in user_input_lower:
                score += 1
        
        if score > best_score:
            best_score = score
            best_match = category
    
    # Si on a trouvÃ© une bonne correspondance
    if best_score >= 1:
        return KNOWLEDGE_BASE[best_match]["responses"][language]
    
    # Recherche de secours avec mots individuels
    for category, data in KNOWLEDGE_BASE.items():
        for keyword in data["keywords"][language]:
            # VÃ©rifie si des mots individuels correspondent
            words = user_input_lower.split()
            for word in words:
                if word in keyword or keyword in word:
                    return data["responses"][language]
    
    # RÃ©ponse par dÃ©faut
    default_responses = {
        "fr": "ğŸ¤– **Expert Tsunami** - Je n'ai pas compris votre question. Essayez avec : dÃ©finition, causes, sÃ©isme, volcan, consÃ©quences, signes avant-coureurs, protection, ou exemples historiques.",
        "en": "ğŸ¤– **Tsunami Expert** - I didn't understand your question. Try with: definition, causes, earthquake, volcano, consequences, warning signs, protection, or historical examples.",
        "ar": "ğŸ¤– **Ø®Ø¨ÙŠØ± Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ** - Ù„Ù… Ø£ÙÙ‡Ù… Ø³Ø¤Ø§Ù„Ùƒ. Ø¬Ø±Ø¨ Ù…Ø¹: ØªØ¹Ø±ÙŠÙØŒ Ø£Ø³Ø¨Ø§Ø¨ØŒ Ø²Ù„Ø²Ø§Ù„ØŒ Ø¨Ø±ÙƒØ§Ù†ØŒ Ø¹ÙˆØ§Ù‚Ø¨ØŒ Ø¹Ù„Ø§Ù…Ø§Øª Ø¥Ù†Ø°Ø§Ø±ØŒ Ø­Ù…Ø§ÙŠØ©ØŒ Ø£Ùˆ Ø£Ù…Ø«Ù„Ø© ØªØ§Ø±ÙŠØ®ÙŠØ©."
    }
    return default_responses[language]

def display_text(text, language):
    """Affiche le texte avec la bonne direction"""
    if language == "ar":
        st.markdown(f'<div class="arabic-text">{text}</div>', unsafe_allow_html=True)
    else:
        st.markdown(text)

# ==================== INTERFACE COMPLÃˆTE ====================

# Titre
st.markdown('<div class="main-header">ğŸŒŠ Expert Tsunami</div>', unsafe_allow_html=True)

# Sidebar
with st.sidebar:
    st.markdown("### ğŸŒ Langue")
    selected_language = st.radio("", list(LANGUAGES.keys()), label_visibility="collapsed")
    current_lang = LANGUAGES[selected_language]
    
    # Toutes les catÃ©gories de questions
    categories = {
        "fr": {
            "definition": "ğŸ“š DÃ©finition et Causes",
            "consequences": "ğŸ’¥ ConsÃ©quences", 
            "historique": "ğŸ“… Exemples Historiques",
            "prevention": "ğŸ›¡ï¸ PrÃ©vention et Solutions",
            "science": "ğŸ”¬ Science et GÃ©ographie",
            "curiosites": "ğŸ” CuriositÃ©s et Ã‰tudes"
        },
        "en": {
            "definition": "ğŸ“š Definition and Causes",
            "consequences": "ğŸ’¥ Consequences",
            "historique": "ğŸ“… Historical Examples", 
            "prevention": "ğŸ›¡ï¸ Prevention and Solutions",
            "science": "ğŸ”¬ Science and Geography",
            "curiosites": "ğŸ” Curiosities and Studies"
        },
        "ar": {
            "definition": "ğŸ“š Ø§Ù„ØªØ¹Ø±ÙŠÙ ÙˆØ§Ù„Ø£Ø³Ø¨Ø§Ø¨",
            "consequences": "ğŸ’¥ Ø§Ù„Ø¹ÙˆØ§Ù‚Ø¨",
            "historique": "ğŸ“… Ø£Ù…Ø«Ù„Ø© ØªØ§Ø±ÙŠØ®ÙŠØ©",
            "prevention": "ğŸ›¡ï¸ Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© ÙˆØ§Ù„Ø­Ù„ÙˆÙ„", 
            "science": "ğŸ”¬ Ø§Ù„Ø¹Ù„Ù… ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
            "curiosites": "ğŸ” ÙØ¶ÙˆÙ„ÙŠØ§Øª ÙˆØ¯Ø±Ø§Ø³Ø§Øª"
        }
    }
    
    # Toutes les questions organisÃ©es par catÃ©gorie
    questions_by_category = {
        "definition": {
            "fr": [
                "Qu'est-ce qu'un tsunami ?",
                "DiffÃ©rence avec vague normale",
                "Causes principales", 
                "Comment un sÃ©isme provoque un tsunami",
                "Tsunamis volcaniques et glissements",
                "Signes avant-coureurs"
            ],
            "en": [
                "What is a tsunami?",
                "Difference with normal wave",
                "Main causes",
                "How earthquake causes tsunami", 
                "Volcanic and landslide tsunamis",
                "Warning signs"
            ],
            "ar": [
                "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠØŸ",
                "Ø§Ù„ÙØ±Ù‚ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¬Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©",
                "Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
                "ÙƒÙŠÙ ÙŠØªØ³Ø¨Ø¨ Ø§Ù„Ø²Ù„Ø²Ø§Ù„ ÙÙŠ ØªØ³ÙˆÙ†Ø§Ù…ÙŠ",
                "ØªØ³ÙˆÙ†Ø§Ù…ÙŠ Ø§Ù„Ø¨Ø±Ø§ÙƒÙŠÙ† ÙˆØ§Ù„Ø§Ù†Ù‡ÙŠØ§Ø±Ø§Øª", 
                "Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø¥Ù†Ø°Ø§Ø±"
            ]
        },
        "consequences": {
            "fr": [
                "ConsÃ©quences humaines",
                "Impacts Ã©conomiques",
                "Impact environnement et biodiversitÃ©",
                "Exemples de tsunamis dÃ©vastateurs",
                "Effets Ã  long terme sur les populations", 
                "MortalitÃ© moyenne lors des tsunamis"
            ],
            "en": [
                "Human consequences",
                "Economic impacts", 
                "Environmental impact and biodiversity",
                "Examples of devastating tsunamis",
                "Long-term effects on populations",
                "Average mortality in tsunamis"
            ],
            "ar": [
                "Ø§Ù„Ø¹ÙˆØ§Ù‚Ø¨ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©",
                "Ø§Ù„Ø¢Ø«Ø§Ø± Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©",
                "Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¨ÙŠØ¦ÙŠ ÙˆØ§Ù„ØªÙ†ÙˆØ¹ Ø§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠ", 
                "Ø£Ù…Ø«Ù„Ø© Ø¹Ù„Ù‰ ØªØ³ÙˆÙ†Ø§Ù…ÙŠØ§Øª Ù…Ø¯Ù…Ø±Ø©",
                "Ø§Ù„Ø¢Ø«Ø§Ø± Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ø¯Ù‰ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙƒØ§Ù†",
                "Ù…ØªÙˆØ³Ø· Ø§Ù„ÙˆÙÙŠØ§Øª ÙÙŠ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ"
            ]
        },
        "historique": {
            "fr": [
                "Tsunami de 2004 dans l'ocÃ©an Indien",
                "Tsunami du Japon en 2011",
                "Tsunamis les plus meurtriers de l'histoire",
                "Pays affectÃ©s par des tsunamis cÃ©lÃ¨bres"
            ],
            "en": [
                "2004 Indian Ocean tsunami", 
                "2011 Japan tsunami",
                "Deadliest tsunamis in history",
                "Countries affected by famous tsunamis"
            ],
            "ar": [
                "ØªØ³ÙˆÙ†Ø§Ù…ÙŠ Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù‡Ù†Ø¯ÙŠ 2004",
                "ØªØ³ÙˆÙ†Ø§Ù…ÙŠ Ø§Ù„ÙŠØ§Ø¨Ø§Ù† 2011",
                "Ø£Ø®Ø·Ø± Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠØ§Øª ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ®", 
                "Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ù…ØªØ¶Ø±Ø±Ø© Ù…Ù† ØªØ³ÙˆÙ†Ø§Ù…ÙŠØ§Øª Ù…Ø´Ù‡ÙˆØ±Ø©"
            ]
        },
        "prevention": {
            "fr": [
                "SystÃ¨mes de dÃ©tection des tsunamis",
                "Protection au Japon et au Chili",
                "Mesures pour rÃ©duire les pertes humaines",
                "Sensibilisation de la population", 
                "EfficacitÃ© des digues et barriÃ¨res",
                "RÃ´le des alertes prÃ©coces et exercices"
            ],
            "en": [
                "Tsunami detection systems",
                "Protection in Japan and Chile", 
                "Measures to reduce human losses",
                "Population awareness",
                "Effectiveness of seawalls and barriers",
                "Role of early warnings and drills"
            ],
            "ar": [
                "Ø£Ù†Ø¸Ù…Ø© ÙƒØ´Ù Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ",
                "Ø§Ù„Ø­Ù…Ø§ÙŠØ© ÙÙŠ Ø§Ù„ÙŠØ§Ø¨Ø§Ù† ÙˆØªØ´ÙŠÙ„ÙŠ",
                "Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø®Ø³Ø§Ø¦Ø± Ø§Ù„Ø¨Ø´Ø±ÙŠØ©", 
                "ØªÙˆØ¹ÙŠØ© Ø§Ù„Ø³ÙƒØ§Ù†",
                "ÙØ¹Ø§Ù„ÙŠØ© Ø§Ù„Ø£Ø³ÙˆØ§Ø± Ø§Ù„Ø¨Ø­Ø±ÙŠØ© ÙˆØ§Ù„Ø­ÙˆØ§Ø¬Ø²",
                "Ø¯ÙˆØ± Ø§Ù„Ø¥Ù†Ø°Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø¨ÙƒØ±Ø© ÙˆØ§Ù„ØªÙ…Ø§Ø±ÙŠÙ†"
            ]
        },
        "science": {
            "fr": [
                "Zones les plus frÃ©quentes des tsunamis",
                "Profondeur minimale pour la formation",
                "Mouvement des tsunamis dans l'ocÃ©an",
                "Tsunamis toujours aprÃ¨s sÃ©isme ?", 
                "Influence de la gÃ©ographie cÃ´tiÃ¨re"
            ],
            "en": [
                "Most frequent tsunami zones",
                "Minimum depth for formation", 
                "Tsunami movement in the ocean",
                "Tsunamis always after earthquake?",
                "Influence of coastal geography"
            ],
            "ar": [
                "Ø£ÙƒØ«Ø± Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ ØªÙƒØ±Ø§Ø±Ù‹Ø§",
                "Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø¹Ù…Ù‚ Ù„Ù„ØªÙƒÙˆÙŠÙ†",
                "Ø­Ø±ÙƒØ© Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ ÙÙŠ Ø§Ù„Ù…Ø­ÙŠØ·", 
                "Ù‡Ù„ Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø²Ù„Ø²Ø§Ù„ØŸ",
                "ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§ Ø§Ù„Ø³Ø§Ø­Ù„ÙŠØ©"
            ]
        },
        "curiosites": {
            "fr": [
                "Temps d'atteinte de la cÃ´te",
                "Vague la plus haute enregistrÃ©e", 
                "Tsunamis dans lacs ou riviÃ¨res",
                "PrÃ©voir la taille d'un tsunami",
                "Technologies futures de protection"
            ],
            "en": [
                "Time to reach the coast",
                "Highest recorded wave",
                "Tsunamis in lakes or rivers", 
                "Predicting tsunami size",
                "Future protection technologies"
            ],
            "ar": [
                "ÙˆÙ‚Øª Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø§Ø­Ù„",
                "Ø£Ø¹Ù„Ù‰ Ù…ÙˆØ¬Ø© Ù…Ø³Ø¬Ù„Ø©",
                "ØªØ³ÙˆÙ†Ø§Ù…ÙŠ ÙÙŠ Ø§Ù„Ø¨Ø­ÙŠØ±Ø§Øª Ø£Ùˆ Ø§Ù„Ø£Ù†Ù‡Ø§Ø±", 
                "Ø§Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø­Ø¬Ù… Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ",
                "ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©"
            ]
        }
    }
    
    # Affichage de toutes les catÃ©gories
    for category_key, category_name in categories[current_lang].items():
        st.markdown(f'<div class="category-header">{category_name}</div>', unsafe_allow_html=True)
        for question in questions_by_category[category_key][current_lang]:
            if st.button(question, key=f"{category_key}_{question}"):
                st.session_state.auto_question = question
    
    st.markdown("---")
    st.markdown("### ğŸš¨ Urgence")
    emergency_text = {
        "fr": "**Ã‰loignement immÃ©diat**\n\n**112 â€¢ 911 â€¢ 999**\n\nEn cas de sÃ©isme cÃ´tier ou retrait de la mer, Ã©vacuez immÃ©diatement vers les hauteurs !",
        "en": "**Immediate evacuation**\n\n**112 â€¢ 911 â€¢ 999**\n\nDuring coastal earthquake or sea retreat, evacuate immediately to high ground!",
        "ar": "**Ø¥Ø®Ù„Ø§Ø¡ ÙÙˆØ±ÙŠ**\n\n**112 â€¢ 911 â€¢ 999**\n\nØ£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø²Ù„Ø²Ø§Ù„ Ø§Ù„Ø³Ø§Ø­Ù„ÙŠ Ø£Ùˆ Ø§Ù†Ø³Ø­Ø§Ø¨ Ø§Ù„Ø¨Ø­Ø±ØŒ Ø§Ø®Ù„ ÙÙˆØ±Ù‹Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø±ØªÙØ¹Ø§Øª!"
    }
    st.markdown(f'<div class="emergency-box">{emergency_text[current_lang]}</div>', unsafe_allow_html=True)

# Zone de chat principale
st.markdown('<div class="chat-container">', unsafe_allow_html=True)

# Historique de conversation
if "messages" not in st.session_state:
    welcome_messages = {
        "fr": "ğŸŒŠ **Expert Tsunami** - Je peux rÃ©pondre Ã  toutes vos questions sur les tsunamis : dÃ©finition, causes, consÃ©quences, prÃ©vention, science et exemples historiques. Utilisez les boutons ou tapez vos questions !",
        "en": "ğŸŒŠ **Tsunami Expert** - I can answer all your questions about tsunamis: definition, causes, consequences, prevention, science and historical examples. Use buttons or type your questions!", 
        "ar": "ğŸŒŠ **Ø®Ø¨ÙŠØ± Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ** - ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø£Ø³Ø¦Ù„ØªÙƒ Ø¹Ù† Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ: ØªØ¹Ø±ÙŠÙØŒ Ø£Ø³Ø¨Ø§Ø¨ØŒ Ø¹ÙˆØ§Ù‚Ø¨ØŒ ÙˆÙ‚Ø§ÙŠØ©ØŒ Ø¹Ù„Ù… ÙˆØ£Ù…Ø«Ù„Ø© ØªØ§Ø±ÙŠØ®ÙŠØ©. Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø£Ùˆ Ø§ÙƒØªØ¨ Ø£Ø³Ø¦Ù„ØªÙƒ!"
    }
    st.session_state.messages = [
        {"role": "assistant", "content": welcome_messages[current_lang]}
    ]

# Affichage de l'historique des messages
for message in st.session_state.messages:
    with st.chat_message(message["role"]):
        display_text(message["content"], current_lang)

# Gestion des questions automatiques depuis les boutons
if "auto_question" in st.session_state:
    prompt = st.session_state.auto_question
    del st.session_state.auto_question
else:
    prompt = None

# Input utilisateur
if prompt or (user_input := st.chat_input("ğŸ’¬ Posez votre question...")):
    
    if not prompt:
        prompt = user_input
    
    # Ajout du message utilisateur
    st.session_state.messages.append({"role": "user", "content": prompt})
    
    # GÃ©nÃ©ration de la rÃ©ponse
    response = find_response(prompt, current_lang)
    
    # Ajout de la rÃ©ponse
    st.session_state.messages.append({
        "role": "assistant", 
        "content": response
    })
    
    st.rerun()

st.markdown('</div>', unsafe_allow_html=True)

# Pied de page
st.markdown("---")
footer_text = {
    "fr": "ğŸŒŠ **Expert Tsunami** - Application Ã©ducative crÃ©Ã©e pour informer et sensibiliser sur les risques de tsunamis. Les informations fournies sont Ã  but Ã©ducatif uniquement.",
    "en": "ğŸŒŠ **Tsunami Expert** - Educational application created to inform and raise awareness about tsunami risks. Provided information is for educational purposes only.",
    "ar": "ğŸŒŠ **Ø®Ø¨ÙŠØ± Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ** - ØªØ·Ø¨ÙŠÙ‚ ØªØ¹Ù„ÙŠÙ…ÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ù„Ø¥Ø¹Ù„Ø§Ù… ÙˆØ§Ù„ØªÙˆØ¹ÙŠØ© Ø¨Ù…Ø®Ø§Ø·Ø± Ø§Ù„ØªØ³ÙˆÙ†Ø§Ù…ÙŠ. Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙÙ‚Ø·."
}
st.markdown(f'<div style="text-align: center; color: #666; font-size: 0.9em;">{footer_text[current_lang]}</div>', unsafe_allow_html=True)
